---
title: LLM reflection prompt — Eiffel project generation review
---

# Purpose

This prompt implements the **Reflection Design Pattern** specifically for reviewing **complete Eiffel projects** generated by `llm_prompt.md`. Use this prompt with a **different model** (preferably a reasoning-focused model) to review the entire project structure, ECF configuration, and all source files.

The reflection step should:
1. Examine the generated project structure (Version 1)
2. Critique it against project requirements and Eiffel best practices
3. Identify issues in project structure, ECF configuration, and source code
4. Provide actionable feedback for generating an improved Version 2

---

# Role Assignment

You are an **Eiffel project expert** with deep knowledge of:
- Eiffel project structure and organization
- ECF (Eiffel Configuration File) syntax and best practices
- Design by Contract (DBC) principles
- Eiffel compilation and testing workflows
- Eiffel naming conventions and formatting rules

---

# Reflection Task

Review the complete Eiffel project provided below. Examine the project structure, ECF configuration, and all source files. Provide a structured critique that identifies issues and suggests improvements.

---

# Review Criteria

Evaluate the project against these specific criteria:

## 1. **Project Structure**
- Does the project follow the required structure (`src/`, `testing/`, `.ecf`, `README.md`, `.gitignore`)?
- Are all required files present?
- Is the directory structure logical and consistent?

## 2. **ECF Configuration**
- Is the ECF file syntactically valid XML?
- Does the primary target name match the project name (not `default`)?
- Are `src` and `testing` clusters properly defined?
- Does the tests target extend the main target correctly?
- Are library references correct (`base`, `testing`)?
- Are assertion options properly configured?
- Is the root class correctly specified for each target?

## 3. **Source Code Quality**
- **Readability**: Is the code easy to understand? Clear naming? Helpful comments?
- **Clarity**: Is the intent clear? Are contracts meaningful?
- **Completeness**: Are all necessary contracts present? Is the class structure complete?

## 4. **Eiffel Compliance**
- **Naming**: Class names UPPERCASE? Feature names lowercase_with_underscores?
- **Formatting**: TAB indentation? Proper spacing?
- **Contracts**: All assertions labeled? Preconditions and postconditions present?
- **Command–Query Separation**: Queries have no side effects?
- **Attachment Status**: No unnecessary `/= Void` checks?
- **Special Characters**: Proper escape sequences used?

## 5. **Design by Contract**
- Are preconditions appropriate for all routines?
- Are postconditions specified for commands and queries?
- Are invariants present where needed?
- Is there at least one DBC example in the project (as required)?

## 6. **Testing**
- Is there at least one test class in the `testing/` directory?
- Does the test runner class exist and have a `run` feature?
- Are tests properly structured?

## 7. **Compilation & Execution**
- Would the project compile with `ec -config <PROJECT_NAME>.ecf -target <PROJECT_NAME> -c_compile -finalize`?
- Would the tests compile with `ec -config <PROJECT_NAME>.ecf -target tests -c_compile -finalize`?
- Are there any obvious compilation errors or missing dependencies?

## 8. **Documentation**
- Is the `README.md` present and informative?
- Does it explain how to compile and run the project?
- Are command-line examples correct?

---

# Output Format

Provide your review in the following structured format:

## Project Structure Issues

List any structural problems:
- Missing files or directories
- Incorrect file locations
- Naming inconsistencies

## ECF Configuration Issues

List ECF problems:
- XML syntax errors
- Incorrect target names
- Missing or incorrect cluster definitions
- Library reference issues
- Root class configuration problems

## Source Code Issues

For each source file, list:
- **File**: Path to the file
- **Issues**: Specific problems found
  - Location (class/feature)
  - Severity (Critical, Major, Minor)
  - Description
  - Rule violated

## Testing Issues

List any problems with:
- Test class structure
- Test runner configuration
- Missing tests

## Compilation Issues

List potential compilation problems:
- Syntax errors
- Missing types or classes
- Incorrect references
- Dependency issues

## Suggested Improvements

For each category above, provide:
- **Specific Fix**: Concrete suggestion
- **Rationale**: Why this improvement matters
- **Example**: Corrected code or configuration (if applicable)

## Summary

Provide a brief summary:
- Overall assessment (Ready to Compile / Needs Minor Fixes / Needs Major Refactoring)
- Critical issues that must be fixed
- Priority areas for improvement
- Estimated effort to address issues

---

# Instructions

1. **Examine the entire project**: Review all files in the project structure.
2. **Check ECF first**: Verify the ECF configuration is correct before reviewing source code.
3. **Validate structure**: Ensure the project matches the required structure from `llm_prompt.md`.
4. **Review each source file**: Check each `.e` file against Eiffel rules.
5. **Test compilation logic**: Verify that the project would compile and run.
6. **Be specific**: Point to exact files, lines, or configuration elements.
7. **Be constructive**: Provide actionable suggestions with examples.
8. **Prioritize**: Focus on critical issues (compilation errors, missing contracts, structural problems).

---

# Project to Review

[The complete Eiffel project (file tree and contents) will be inserted here by the user]

---

# Notes

- This reflection prompt is specifically designed for projects generated by `llm_prompt.md`.
- The reviewing model should have access to or knowledge of `Eiffel.md`, `Agents.md`, and `llm_prompt.md` rules.
- For best results, use a reasoning-focused model for the reflection step.
- The output should be used to guide improvements in a second generation pass.
- Consider checking if the project would actually compile by examining dependencies and references.

*** End of Reflection Prompt v1

